

TODO Features

* Perf comparison
** TODO Adapt multichase to test dax and pmem memory
** TODO Adapt multihase to test mmapped file
** TODO Compare multichase on pmem, /dev/dax, and famfs file

* Enforce only master can append log
** DONE Write system uuid to superblock
** TODO libfamfs should prevent log write on system with mismatched uuid
* Properly serialize allocating and log append
** TODO Use flock spanning alloc, init and log append
** TODO Correct procedure for log append
1. Alloc log space
2. Append log
3. flush cache
4. barrier
5. write log header (make log append visible)
6. flush cache

* Log / Logplay
** DONE Do an mmap-based logplay for /dev/dax benchmarking
** TODO files on clients should default to read-only
** DONE Add a crc to log entries
** DONE Add a crc to log header
** DONE Logplay: check seq numbers
** DONE Logplay: check crc on entries
** TODO famfs logplay: enforce superblock rules
** TODO All log opens; do read-only first, and only open writable on the master
** TODO famfs_log_append: check host_uuid to see if I'm the master
fail any log writing if not the master

* fsck, etc.
** DONE (bug) on 1T device, famfs thinks it's full way too soon
Had some regular ints where I needed U64's
** DONE mkfs/famfs_lib: implement superblock crc
(it currently doesn't check the superblock, which is not good)
** DONE famfs fsck: enforce superblock crc
** DONE famfs fsck: enforce superblock version
** DONE famfs fsck: free space always zero
** DONE famfs fsck: print percentage used
** DONE famfs fsck: optionally print capacities in human form (G)

* file operaitons
** TODO famfs mv: rename can work
...but only of logplay looks ahead for renames!!
** TODO files on clients should default to read-only
** TODO famfs cp: semantics like real cp
*** TODO famfs cp: if multiple sources and target is dir, use basenames on dest files
do globbing; last arg must be directory if there are more than 2 args. if last arg is dir,
use basename of each.
*** TODO python (or other) script to do recursive 'tagfs cp'?

* Configurable log size
** TODO FAMFS_LOG_LEN becomes FAMFS_MIN_LOG_LEN, actual gets looked up in SB?
** TODO Need tests that fully validate log behavior

* Unit test needs
** TODO Test bitmap on various sized devices
